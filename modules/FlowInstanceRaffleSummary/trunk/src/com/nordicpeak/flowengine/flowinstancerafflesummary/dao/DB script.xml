<DBScripts>
	<Script version="1">
		<Query>
			<![CDATA[
				CREATE TABLE `raffle_rounds` (
					`roundID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
					`moduleID` INT(10) UNSIGNED NOT NULL,
					`name` TINYTEXT NOT NULL,
					`startDate` DATETIME NULL,
					`endDate` DATETIME NULL,
					PRIMARY KEY (`roundID`),
					INDEX `FK__openhierarchy_foreground_modules` (`moduleID`),
					CONSTRAINT `FK_raffle_rounds` FOREIGN KEY (`moduleID`) REFERENCES `openhierarchy_foreground_modules` (`moduleID`) ON UPDATE CASCADE ON DELETE CASCADE
				)
				COLLATE='latin1_swedish_ci'
				ENGINE=InnoDB;
			]]>
		</Query>
		<Query>
			<![CDATA[
				CREATE TABLE `raffle_flows` (
					`raffleFlowID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
					`flowID` INT(10) UNSIGNED NOT NULL,
					`roundID` INT(10) UNSIGNED NOT NULL,
					`raffledStatusID` INT(10) UNSIGNED NULL,
					PRIMARY KEY (`raffleFlowID`),
					CONSTRAINT `FK_raffle_flows_1` FOREIGN KEY (`flowID`) REFERENCES `flowengine_flows` (`flowID`) ON UPDATE CASCADE ON DELETE CASCADE,
					CONSTRAINT `FK_raffle_flows_2` FOREIGN KEY (`roundID`) REFERENCES `raffle_rounds` (`roundID`) ON UPDATE CASCADE ON DELETE CASCADE,
					CONSTRAINT `FK_raffle_flows_3` FOREIGN KEY (`raffledStatusID`) REFERENCES `flowengine_flow_statuses` (`statusID`) ON UPDATE CASCADE ON DELETE CASCADE
				)
				COLLATE='latin1_swedish_ci'
				ENGINE=InnoDB;
			]]>
		</Query>
		<Query>
			<![CDATA[
				CREATE TABLE `raffle_flow_excluded_statuses` (
					`raffleFlowID` INT(10) UNSIGNED NOT NULL,
					`statusID` INT(10) UNSIGNED NOT NULL,
					PRIMARY KEY (`raffleFlowID`, `statusID`),
					INDEX `FK__flowengine_flow_statuses` (`statusID`),
					CONSTRAINT `FK_raffle_flow_excluded_statuses_1` FOREIGN KEY (`raffleFlowID`) REFERENCES `raffle_flows` (`raffleFlowID`) ON UPDATE CASCADE ON DELETE CASCADE,
					CONSTRAINT `FK_raffle_flow_excluded_statuses_2` FOREIGN KEY (`statusID`) REFERENCES `flowengine_flow_statuses` (`statusID`) ON UPDATE CASCADE ON DELETE CASCADE
				)
				COLLATE='latin1_swedish_ci'
				ENGINE=InnoDB;
			]]>
		</Query>
	</Script>
	
	<Script version="2">
		<Query>
			<![CDATA[
				ALTER TABLE `raffle_rounds`
					ADD COLUMN `addFlowID` INT(10) UNSIGNED NULL DEFAULT NULL AFTER `endDate`,
					ADD CONSTRAINT `FK_raffle_rounds_flowengine_flows` FOREIGN KEY (`addFlowID`) REFERENCES `flowengine_flows` (`flowID`) ON UPDATE CASCADE ON DELETE SET NULL;
			]]>
		</Query>
	</Script>
	
	<Script version="3">
		<Query>
			<![CDATA[
				ALTER TABLE `raffle_rounds`
					ADD COLUMN `decisionEmailMessage` TEXT NULL AFTER `addFlowID`,
					ADD COLUMN `decisionSMSMessage` TEXT NULL AFTER `decisionEmailMessage`;
			]]>
		</Query>
	</Script>
	
	<Script version="4">
		<Query>
			<![CDATA[
				ALTER TABLE `raffle_rounds`
					CHANGE COLUMN `startDate` `startDate` DATE NULL DEFAULT NULL AFTER `name`,
					CHANGE COLUMN `endDate` `endDate` DATE NULL DEFAULT NULL AFTER `startDate`;
			]]>
		</Query>
	</Script>
	
	<Script version="5">
		<Query>
			<![CDATA[
				ALTER TABLE `raffle_rounds`
					ADD COLUMN `overrideStatusChangedNotification` TINYINT(1) UNSIGNED NOT NULL AFTER `decisionSMSMessage`;
			]]>
		</Query>
	</Script>
	
</DBScripts>